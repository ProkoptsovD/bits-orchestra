"use strict";(self.webpackChunkbits_orchestra=self.webpackChunkbits_orchestra||[]).push([[310],{153:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(413),a=n(925),o="Container_container__VRrje",c=n(184),s=["children","className"],u=function(e){var t=e.children,n=e.className,u=(0,a.Z)(e,s);return(0,c.jsx)("div",(0,r.Z)((0,r.Z)({className:"".concat(o," ").concat(n)},u),{},{children:t}))}},216:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(413),a=n(925),o=n(504),c=n(327),s=n(184),u=["text","className"],i=function(e){var t=e.text,n=e.className,i=void 0===n?"":n,l=(0,a.Z)(e,u),d="".concat(c.Z.button," ").concat(i);return(0,s.jsx)(o.rU,(0,r.Z)((0,r.Z)({className:d},l),{},{children:t}))}},841:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(153),a=n(334),o="Section_section__7PoKG",c="Section_title__H9e+4",s=n(184),u=function(e){var t=e.children,n=e.title,u=e.titleStyles,i=void 0===u?"":u,l=e.containerStyles,d=void 0===l?"":l,f=e.sectionStyles,h=void 0===f?"":f,v=e.component;return(0,s.jsx)("section",{className:"".concat(o," ").concat(h),children:(0,s.jsxs)(r.Z,{className:d,children:[n&&(0,s.jsx)(a.Z,{text:n,component:v,className:"".concat(c," ").concat(i)}),t]})})}},603:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(413),a=n(925),o=n(327),c=n(184),s=["text","className"],u=function(e){var t=e.text,n=e.className,u=void 0===n?"":n,i=(0,a.Z)(e,s),l="".concat(o.Z.button," ").concat(u);return(0,c.jsx)("button",(0,r.Z)((0,r.Z)({className:l},i),{},{children:t}))}},334:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(413),a=n(925),o="Title_title__MxNSH",c=n(184),s=["text","component","className"],u=function(e){var t=e.text,n=e.component,u=e.className,i=void 0===u?"":u,l=(0,a.Z)(e,s),d="".concat(o," ").concat(i),f=(0,c.jsx)("h1",(0,r.Z)((0,r.Z)({className:d},l),{},{children:t}));switch(n){case"h2":f=(0,c.jsx)("h2",(0,r.Z)((0,r.Z)({className:d},l),{},{children:t}));break;case"h3":f=(0,c.jsx)("h3",(0,r.Z)((0,r.Z)({className:d},l),{},{children:t}));break;case"h4":f=(0,c.jsx)("h4",(0,r.Z)((0,r.Z)({className:d},l),{},{children:t}));break;case"h5":f=(0,c.jsx)("h5",(0,r.Z)((0,r.Z)({className:d},l),{},{children:t}));break;case"h6":f=(0,c.jsx)("h6",(0,r.Z)((0,r.Z)({className:d},l),{},{children:t}));break;default:return f}return f}},310:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var r,a,o,c=n(885),s=n(791),u=n(871),i=n(413),l=n(982),d=n(925),f=n(104),h=n(363),v="InputWithLabel_label__uq2q8",p="InputWithLabel_required__YJs6B",x="InputWithLabel_input__2L5K0",b=n(184),m=["label","labelStyles","inputStyles","wrapperStyles","required","value","onChange"],Z=function(e){var t=e.label,n=e.labelStyles,r=void 0===n?"":n,a=e.inputStyles,o=void 0===a?"":a,c=e.wrapperStyles,s=void 0===c?"":c,u=e.required,l=e.value,f=e.onChange,h=(0,d.Z)(e,m),Z=u?p:"",k="".concat(v," ").concat(r," ").concat(Z),_="".concat(x," ").concat(o),S="".concat(s);return(0,b.jsxs)("div",{className:S,children:[t&&(0,b.jsx)("label",{className:k,children:t}),(0,b.jsx)("input",(0,i.Z)({className:_,value:l,onChange:f,required:u},h))]})},k=n(309),_="Select_wrapper__ieKxo",S="Select_select__KxRfo",j="Select_label__B44vK",y=function(e){var t=e.options,n=e.value,r=e.onChange,a=e.id,o=e.label,c=e.selectStyles,s=void 0===c?"":c,u=e.wrapperStyles,i=void 0===u?"":u,l="".concat(S," ").concat(s),d="".concat(_," ").concat(i);return(0,b.jsxs)("div",{className:d,children:[o&&(0,b.jsx)("label",{className:j,htmlFor:a,children:o}),(0,b.jsx)("select",{id:a,name:a,onChange:r,value:n,className:l,children:t&&t.map((function(e){return(0,b.jsx)("option",{value:e,children:e},(0,k.O)())}))})]})},g=n(603),N="AddBookForm_form__WZ9Js",w="AddBookForm_label__-ECjS",B="AddBookForm_add_book__Gb3ax",T=n(9),E=n(765),C=n(219),A=["editBook","book"],I=function(e){var t=e.editBook,n=e.book,r=(0,d.Z)(e,A),a=(0,s.useState)(),o=(0,c.Z)(a,2),v=o[0],p=o[1],x=(0,s.useState)(""),m=(0,c.Z)(x,2),k=m[0],_=m[1],S=(0,s.useState)(""),j=(0,c.Z)(S,2),I=j[0],O=j[1],G=(0,s.useState)(f.xG[0]),q=(0,c.Z)(G,2),H=q[0],z=q[1],L=(0,s.useState)(""),P=(0,c.Z)(L,2),K=P[0],M=P[1],R=(0,s.useState)(f.xG),W=(0,c.Z)(R,2),F=W[0],D=W[1],J=(0,s.useState)(!1),U=(0,c.Z)(J,2),Q=U[0],V=U[1],X=(0,s.useState)(!1),Y=(0,c.Z)(X,1)[0],$=(0,s.useContext)(T.R).clearAllToasts,ee=(0,u.s0)(),te=(0,s.useContext)(T.R).createToast;(0,s.useEffect)((function(){var e=null;if(t&&n&&!Q&&Y){var r=n.id,a=n.title,o=n.author,c=n.category,s=n.ISBN;return p(r),_(a),O(o),z(null===c||void 0===c?void 0:c[0]),M(s),void D([].concat((0,l.Z)(c),(0,l.Z)(f.xG)))}if(!Q)return function(){clearTimeout(e)};e=setTimeout((function(){$(),ee(f.Z6.HOME)}),1e3)}),[t,n,ee,$,Q,Y]);function ne(){te((0,E.z)("success")),_(""),O(""),M(""),V(!0)}function re(){te((0,E.z)("error"))}return(0,b.jsxs)("form",(0,i.Z)((0,i.Z)({className:N,onSubmit:function(e){e.preventDefault();var n,r=k&&I&&H&&K,a=(n=+K,C.W.test(n));if(r)if(a){var o={title:k,author:I,category:[H],ISBN:+K};t?h.H.updateBook(v,o).then(ne).catch(re):h.H.createBook(o).then(ne).catch(re)}else te((0,E.z)(null,"ISBN length is ".concat(K.toString().length,". Needed 13 digits")));else te((0,E.z)(null,"All fields must be filled in"))}},r),{},{children:[(0,b.jsx)(Z,{id:"Book title",label:"Book title",required:!0,type:"text",labelStyles:w,onChange:function(e){return _(e.target.value)},value:k}),(0,b.jsx)(Z,{id:"Author name",label:"Author name",required:!0,type:"text",labelStyles:w,onChange:function(e){return O(e.target.value)},value:I}),(0,b.jsx)(y,{id:"Genre",label:"Pick up a genre...",onChange:function(e){return z(e.target.value)},value:H,options:F}),(0,b.jsx)(Z,{id:"ISBN",label:"International Standard Book Number (ISBN)",required:!0,type:"number",labelStyles:w,onChange:function(e){return M(e.target.value)},value:K}),(0,b.jsx)(g.Z,{type:"submit",text:t?"Save changes":"Add book",className:B})]}))},O=n(216),G=n(841),q="AddBookLayout_section__gQGGl",H="AddBookLayout_title__2doNg",z="AddBookLayout_navigate_btn__Skp5e";function L(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var P=function(){var e,t,n=(0,s.useState)(null),i=(0,c.Z)(n,2),l=i[0],d=i[1],v=(0,u.TH)(),p=(0,u.UO)().bookId,x=null!==(e=null===(t=v.state)||void 0===t?void 0:t.from)&&void 0!==e?e:f.Z6.HOME,m=function(e){if("string"!==typeof e||!e)throw new Error("Stirng must be passed");var t=e.match(f.kd).join(a||(a=L([""]))).split(r||(r=L([""]))),n=t.slice(1),c=t.lastIndexOf("/");return n.slice(0,c-1).join(o||(o=L([""])))}(v.pathname)===f.PX.EDIT,Z=m?"Edit book":"Add book",k=(0,s.useContext)(T.R).createToast;return(0,s.useEffect)((function(){m&&h.H.fetchBookById(p).then((function(e){return d(e)})).catch((function(){return k((0,E.z)("error"))}))}),[p,m,k]),(0,b.jsxs)(G.Z,{component:"h2",title:Z,titleStyles:H,sectionStyles:q,children:[(0,b.jsx)(O.Z,{to:x,text:"Go back",className:z}),(0,b.jsx)(I,{editBook:m,book:l})]})}},363:function(e,t,n){n.d(t,{H:function(){return v}});var r=n(861),a=n(413),o=n(757),c=n.n(o),s="http://localhost:1234/books",u=function(e,t){var n=t?{body:JSON.stringify(t)}:{};return(0,a.Z)({method:e,headers:{Accept:"application/json","Content-Type":"application/json"}},n)},i=function(){var e=(0,r.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(s,u("GET"));case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:throw new Error("Server error! Try again");case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s,"/").concat(t),u("GET"));case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:throw new Error("Server error! Try again");case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,fetch(s,u("POST",t));case 4:if(!(n=e.sent).ok){e.next=10;break}return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:throw new Error("Server error! Try again");case 13:return e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(c().mark((function e(t,n){var r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s,"/").concat(t),u("PUT",n));case 3:if(!(r=e.sent).ok){e.next=9;break}return e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:throw new Error("Server error! Try again");case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s,"/").concat(t),u("DELETE"));case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:throw new Error("Server error! Try again");case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),v={fetchAllBooks:i,fetchBookById:l,createBook:d,updateBook:f,deleteBook:h}},309:function(e,t,n){n.d(t,{O:function(){return r}});var r=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,n="",r=0;r<e;r+=1)n+=a(t);return+n};function a(e){return Math.floor(Math.random()*e)+1}},765:function(e,t,n){n.d(t,{z:function(){return o}});var r=n(942),a=n(309),o=function(e,t){var n;return!e&&t?{warnText:t,id:(0,a.O)()}:(n={},(0,r.Z)(n,e,!0),(0,r.Z)(n,"id",(0,a.O)()),n)}},327:function(e,t){t.Z={button:"TextButton_button__GO9Qs"}}}]);
//# sourceMappingURL=310.fd39d33e.chunk.js.map